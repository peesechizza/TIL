# Chapter 07. 보조기억장치

## 07-1. 다양한 보조기억장치

보조기억장치에는 다양한 종류가 있다. 가장 대중적인 보조기억장치는 하드 디스크와 플래시 메모리이다.

### 하드 디스크(HDD; Hard Disk Drive)

하드 디스크는 자기적인 방식으로 데이터를 저장하는 보조기억장치이다. 그래서 자기 디스크(magnetic disk)의 일종으로 지칭하기도 한다.

- `플래터(platter)`
  - 하드 디스크에서 실질적으로 데이터가 저장되는 곳이다. 플래터는 자기 물질로 덮여있어 수많은 N극과 S극을 저장하고, N극과 S극은 0과 1의 역할을 수행한다.
- `스핀들(spindle)`
  - 플래터를 회전시키는 구성 요소이다. 스핀들이 플래터를 돌리는 속도는 RPM이라는 단위로 표현된다
- `헤드`
  - 플래터를 대상으로 데이터를 읽고 쓰는 구성 요소이다.
  - **단일 헤드 디스크(single-head desk)** : 플래터의 한 면당 헤드가 하나씩 달려 있는 하드 디스크로, 헤드를 데이터가 있는 곳까지 움직여야 하기 때문에 `이동 헤드 디스크(movable-head)`라고도 부른다.
  - **다중 헤드 디스크(multiple-head disk) :** 헤드가 트랙별로 여러 개 달려 있는 하드 디스크로, 탐색 시간이 들지 않아 움직일 필요가 없기 때문에 `고정 헤드 디스크(fixed-head disk)`라고도 부른다.
- `디스크 암`
  - 헤드가 부착되어 있으며, 헤드를 원하는 위치로 이동시킨다.

### 하드 디스크 - 플래터

플래터는 **트랙** 과 **섹터** 라는 단위로 데이터를 저장한다.

- `트랙` : 플래터를 여러 동신원으로 나누었을 때 그중 하나의 원을 말한다.
- `섹터` : 트랙의 한 조각, 하드 디스크의 가장 작은 전송 단위다. 하나 이상의 섹터를 묶어 **블록**이라고 표현한다.
- `실린더` : 여러 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위로 연속된 정보는 보통 한 실린더에 저장된다.

### 하드 디스크가 데이터에 접근하는 시간

- `탐색 시간` : 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간
- `회전 지연` : 헤드가 있는 곳으로 플래터를 회전 시키는 시간
- `전송 시간` : 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간

탐색 시간과 회전 지역을 단축시키기 위해서는 RPM을 높이는 것도 중요하지만, 접근하려는 데이터가 플래터 혹은 헤드를 조금만 옮겨도 접근할 수 있는 곳에 위치해 있는 것도 중요하다.

### 플래시 메모리

전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치이다.

- `NAND 플래시 메모리` : NAND 연산을 수행하는 회로, 대용량 저장 장치로 많이 사용된다.
- `NOR 플래시 메모리` : NOR 연산을 수행하는 회로

### 플래시 메모리 구성

- `셀(cell)` : 플래시 메모리에서 데이터를 저장하는 가장 작은 단위로 하나의 셀에 몇 비트를 저장할 수 있느냐에 따라 플래시 메모리 종류가 나뉜다.
- `페이지` : 셀들이 모여 만들어진 단위
- `블록` : 페이지가 모여 만들어진 단위
- `플레인` : 블록이 모여 만들어진 단위
- `다이` : 플레인이 모여 만들어진 단위

### 플래시 메모리 - SLC 타입

SLC 타입은 한 셀에 1비트를 저장하고 두 개의 정보를 표현할 수 있으며 비트의 빠른 입출력이 가능하다. 수명도 다른 타입에 비해 길지만 용량 대비 가격이 높다.

데이터를 읽고 쓰기가 매우 많이 반복되며 고성능의 빠른 저장 장치가 필요한 경우에 SLC 타입을 사용한다.

### 플래시 메모리 - MLC 타입

한 셀에 2비트를 저장하고 네 개의 정보를 표현할 수 있어 SLC 타입보다 대용화하기 유리하다.

### 플래시 메모리 - TLC 타입

한 셀당 3비트씩 저장하고 여덟 개의 정보를 표현할 수 있다. 다른 타입에 비해 수명과 속도가 떨어지지만 가격이 저렴하며 대용화하기 유리하다.

### 플래시 메모리의 상태

플래시 메모리에서 읽기와 쓰기는 페이지 단위로 이루어지며 삭제는 블록 단위로 이루어진다. 플래시 메모리는 하드 디스크와는 달리 덮어 쓰기가 불가능하여 Valid 상태인 페이지에는 새 데이터를 저장할 수 없다.

그래서 유효한 페이지들만 새로운 블록으로 복사한 후 기존 블록을 삭제하여 공간을 정리하는 **가비지 컬렉션**이라는 기능을 제공하여 쓰레기 값을 정리할 수 있도록 한다.

- `Free 상태` : 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
- `Valid 상태` : 이미 유효한 데이터를 저장하고 있는 상태
- `Invalid 상태` : 쓰레기값이라 부르는 유효하지 않은 데이터를 저장하고 있는 상태

## 07-2. RAID의 정의와 종류

### RAID의 정의

RAID(Redundant Array of Independent Disks) 는 주로 하드 디스크와 SSD를 사용하는 기술로, 데이터의 안정성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술이다.

### RAID의 종류

RAID 구성 방법을 RAID 레벨이라고 한다.

- `RAID 0` : 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식이다. 이 때, 분산되어 저장된 데이터를 **스트라입**이라고 하고 분산하여 저장하는 것을 **스트라이핑**이라고 한다. RAID 0 으로 구성된 하드디스크 중 하나에 문제가 생긴다면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있다.
- `RAID 1` : 복사본을 만드는 방식으로 **미러링**이라고도 부른다. RAID 1 방식은 복구가 매우 간단하지만 하드 디스크 개수가 산정되었을 때 사용 가능한 용량이 적어지는 단점이 있다.
- `RAID 4` : 완전한 복사본을 만드는 대신 오류를 검출하고 복구하기 위한 정보(패리티 비트)를 저장한 장치를 두는 구성 방식이다. RAID 1 보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있다.
  > **패리티 비트**
  >
  > 원래 패리티 비트는 오류 검출만 가능할 뿐 오류 복구는 불가하다. 하지만 RAID 에서는 패리티 값으로 오류 수정도 가능하다.
- `RAID 5` : 패리티 정보를 분산하여 저장하는 방식으로 RAID 4 의 문제인 병목 현상을 해소한다.
- `RAID 6` : 구성은 기본적으로 RAID 5 와 같으나, 서로 다른 두 개의 패리티를 구성하는 방식이다.
